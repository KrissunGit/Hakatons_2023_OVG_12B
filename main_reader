import pdfplumber
import matplotlib.pyplot as plt
file_name = input("Please enter your grade file relative path:")
with pdfplumber.open(file_name) as f:
    for i in f.pages:
       og_table_data = i.extract_tables()

for i in og_table_data:
    table_data = i


subject_grades = {}

for row in table_data[1:]:  # Start from index 1 to skip the header row
    subject = row[0]  # Get the subject name
    grades = []

    for item in row[1:]:
        # Splitting the string by spaces and iterating through the resulting substrings
        for substring in item.split():
            try:
                # Extracting digits and converting to int
                number = ''.join(filter(str.isdigit, substring))
                if number:  # Check if digits were found
                    number_int = int(number)
                    if number_int <= 10:  # Check if the integer is 10 or less
                        grades.append(number_int)
            except ValueError:
                pass  # Skip non-convertible values

    # Store the grades in the dictionary under the subject name
    subject_grades[subject] = grades

for subject, grades in subject_grades.items():
    months = [i for i in range(len(grades))]  # x-axis representing months (indexes)

    plt.figure(figsize=(8, 6))
    plt.plot(months, grades, marker='o')
    plt.title(f'Grades for {subject}')
    plt.xlabel('Months')
    plt.ylabel('Grades (0-10)')
    plt.xticks(months, [f'Month {i+1}' for i in range(len(grades))])
    plt.yticks(range(11))
    plt.grid(True)
    plt.show()
